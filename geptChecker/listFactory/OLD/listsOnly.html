<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEPT Wordlist Checker</title>
    <link rel="icon" type="image/x-icon" href="./geptIcon.png" onerror="this.onerror=null;this.href='./geptIcon.png;'">

    <link rel="stylesheet" href="root.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="dialogs.css">
  </head>

  <body>
    <div id="tab-group">
      <div id="tab-head">
        <div class="tab tab-off">Words</div>
        <div class="tab tab-on">Texts</div>
        <div class="tab-tools">
          <button class="dropbtn" id="reset_button" type="button">Clear</button>
          <div class="spacer">&nbsp;</div>
          <!-- adapted from https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_dropdown_right -->
          <div class="dropdown">
            <button class="dropbtn" type="button">Settings</button>
            <div class="dropdown-content" id="settings-content">
              <select name="set-font" id="set-font">
                <option value="8">font 8pt</option>
                <option value="9">font 9pt</option>
                <option value="10">font 10pt</option>
                <option value="11">font 11pt</option>
                <option value="12">font 12pt</option>
                <option value="13">font 13pt</option>
                <option value="14" selected="">font 14pt</option>
                <option value="16">font 16pt</option>
                <option value="18">font 18pt</option>
                <option value="22">font 22pt</option>
                <option value="24">font 24pt</option>
              </select>

              <select name="set-db" id="set-db">
                <option value="0">database: GEPT</option>
                <option value="1">database: GEPTKids</option>
                <option value="2" disabled="">database: MOE</option>
              </select>

              <select name="set-refresh" id="set-refresh" style="display: block;">
                <option value="0">auto refresh</option>
                <option id="set-refresh-manual" value="1">manual refresh</option>
              </select>

              <button id="backup-btn" style="display: block;">backups</button>
              <button id="backup-save" style="display: block;">save backup</button>
            </div>
          </div>
          <dialog id="backup-dlg">
            <div class="dark" id="backup-msg">Click on the text you want to recover.</div>
            <div>
              <button id="backup_0" onclick="loadBackup('backup_0')"></button>
              <button id="backup_1" onclick="loadBackup('backup_1')"></button>
            </div>
          </dialog>
          <div class="spacer">&nbsp;</div>
          <button class="dropbtn" id="refresh_button" type="button" style="display: none">Refresh</button>

          <div class="spacer">&nbsp;</div>
        </div>
      </div>
      <div id="tab-body">
        <div class="tab-content" style="display: none;">
          <div class="t1_form_in">
            <form id="t1_form" onkeydown="return event.key != 'Enter';">
              <!-- the onkeydown prevents the form resetting when 'enter' is pressed  -->
              <fieldset id="t1_term">
                <legend id="t1_term_legend">Search <span id="db_name1" class="dbColor">GEPT</span> wordlist for:</legend>
                <div id="t1_term_inputs">
                  <!-- <input type="text" id="t1_term_i" name="term" autocapitalize="none" spellcheck="false" placeholder="Enter word here..."> -->
                  <input type="text" id="t1_term_i" name="term" autocapitalize="none" spellcheck="false">
                </div>
              </fieldset>
              <fieldset id="t1_match">
                <legend id="t1_match_legend">Match:</legend>
                <div id="t1_match_inputs" class="line-el line">
                  <label for="t1_match_x">exact
                    <input type="radio" name="match" id="t1_match_x" value="^:$">
                  </label>
                  <label for="t1_match_c" class="selected_txt default">contains
                    <input type="radio" name="match" id="t1_match_c" value=":" checked="">
                  </label>
                  <label for="t1_match_s">starts
                    <input type="radio" name="match" id="t1_match_s" value="^:.*">
                  </label>
                  <label for="t1_match_e">ends
                    <input type="radio" name="match" id="t1_match_e" value=".*:$">
                  </label>
                </div>
              </fieldset>
              <fieldset id="t1_level" style="display: block;">
                <legend id="t1_level_legend">Level:</legend>
                <div id="t1_level_inputs" class="line-el line">
                  <label for="t1_level_a" class="selected_txt default">any
                    <input type="radio" name="level" id="t1_level_a" value="" checked="">
                  </label>
                  <label for="t1_level_e">elem.
                    <input type="checkbox" name="level" id="t1_level_e" value="0">
                  </label>
                  <label for="t1_level_i">int.
                    <input type="checkbox" name="level" id="t1_level_i" value="1">
                  </label>
                  <label for="t1_level_h">hi-Int.
                    <input type="checkbox" name="level" id="t1_level_h" value="2">
                  </label>
                </div>
              </fieldset>
              <fieldset id="t1_theme" style="display: none;">
                <legend id="t1_theme_legend">Theme:</legend>
                <div id="t1_theme_values">
                  <select name="theme" id="t1_theme_select" onchange="this.dataset.chosen=this.value;" data-chosen="-1">
                    <option value="-1" selected="" class="default">any</option>
                    <option value="3">Animals &amp; insects</option>
                    <option value="4">Clothing &amp; accessories</option>
                    <option value="5">Colors</option>
                    <option value="6">Family</option>
                    <option value="7">Food &amp; drink</option>
                    <option value="8">Forms of address</option>
                    <option value="9">Geographical terms</option>
                    <option value="10">Health</option>
                    <option value="11">Holidays &amp; festivals</option>
                    <option value="12">Houses &amp; apartments</option>
                    <option value="13">Money</option>
                    <option value="14">Numbers</option>
                    <option value="15">Occupations</option>
                    <option value="16">Other</option>
                    <option value="17">Parts of body</option>
                    <option value="18">People</option>
                    <option value="19">Personal characteristics</option>
                    <option value="20">Places &amp; directions</option>
                    <option value="21">School</option>
                    <option value="22">Sizes &amp; measurements</option>
                    <option value="23">Sports, interest &amp; hobbies</option>
                    <option value="24">Syntax</option>
                    <option value="25">Tableware</option>
                    <option value="26">Time</option>
                    <option value="27">Transportation</option>
                    <option value="28">Weather &amp; nature</option>
                    <option value="29">Wh-words</option>
                    <option value="30">nouns</option>
                    <option value="31">verbs</option>
                  </select>
                </div>
              </fieldset>
              <fieldset id="t1_pos">
                <legend id="t1_pos_legend">Part of Speech:</legend>
                <div id="t1_pos_inputs" class="line-el line">
                  <label for="t1_pos_a" class="selected_txt default">any
                    <input type="radio" name="pos" id="t1_pos_a" value=" " checked="">
                  </label>
                  <label for="t1_pos_n">noun
                    <input type="checkbox" name="pos" id="t1_pos_n" value="noun">
                  </label>
                  <label for="t1_pos_v">verb
                    <input type="checkbox" name="pos" id="t1_pos_v" value="verb">
                  </label>
                  <label for="t1_pos_j">adj.
                    <input type="checkbox" name="pos" id="t1_pos_j" value="adj">
                  </label>
                  <label for="t1_pos_d">adv.
                    <input type="checkbox" name="pos" id="t1_pos_d" value="adv">
                  </label>
                  <label for="t1_pos_o">other
                    <input type="checkbox" name="pos" id="t1_pos_o" value="prep|conj|inf|det|terj|pron|aux|art">
                  </label>
                </div>
              </fieldset>
            </form>
          </div>
          <div class="t1_form_out">
            <fieldset id="t1_results">
              <legend id="t1_results_legend">Results</legend>
              <div id="t1_results_text"></div>
            </fieldset>
          </div>
        </div>
        <div class="tab-content" style="display: flex;">
          <div id="container">
            <div id="left-top">
              <div id="t2_raw_text" contenteditable="true" placeholder="Paste or type text here. (Choose Settings/manual-refresh if you have a lot of text.)"></div>
            </div>
            <div id="separator">&nbsp;</div>
            <div id="right-bot">
              <!-- <div id="t2_final_legend">Text checked against <span class="dbColor" id="db_name2">GEPT</span>:</div> -->
              <div id="t2_final_legend">Checked against <span id="db_name2" class="dbColor">GEPT</span></div>
              <div id="t2_final_info" style="display: none;"></div>
              <div id="t2_final_text"><span class="error">Please input some text.</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <script src="admin.js"></script> -->

    <!-- <script src="touch.js"></script> -->

    <script src="dbs.js"></script>
    <!-- <script src="AWLheadwords.js"></script> -->
    <script src="AWL.Hi-int.js"></script>
    <script src="AWL.Int.js"></script>

    <script src="globals.js"></script>


    <script src="main.js"></script>

    <script>
// for (let el of awlInt){
//   let all = [el[0]].concat(el[2]);
//   for (word of all) {
//     let output = "";
//     const awlLevel = "AWL-" + el[1]
//     let checkLevel = V.currentDb.db.findIndex(x => x[1] === word)
//     if (checkLevel >= 0) {
//       if (V.currentDb.db[checkLevel][C.LEVEL] > 1) {
//         // output = `["${word}", "", [2], "${awlLevel}"] (different level)`;
//       } else {
//         // output = `["${word}", "", [1], "${awlLevel}"] (level agrees with GEPT)`;
//       }
//     } else {
//       // NOT IN GEPT WORDLIST
//       // output = `["${word}", "", [1], "${awlLevel}"] (not in GEPT wordlist)`;
//       output = `["${word}", "", [1], "${awlLevel}"]`;
//     }
//     if (output) console.log(output)
//   }
// }


for (let el of awlHi){
  let all = [el[0]].concat(el[2]);
  for (word of all) {
    let output = "";
    const awlLevel = "AWL-" + el[1]
    let checkLevel = V.currentDb.db.findIndex(x => x[1] === word)
    if (checkLevel === -1) {
      output = `["${word}", "", [2], "${awlLevel}"]`;
    }
    if (output) console.log(output)
  }
}



      // let inGEPT = [];
      // let notInGEPT = [];
// for (let el of awl){

//   if (V.currentDb.db.find(x => x[1] === el[0])){
//     inGEPT.push(el)
//     // break;
//     // console.log(el[0],"is not in GEPT")
//   } else {
//     notInGEPT.push(el)
//     console.log(el[0])
//   }
// }
// console.log("awl:", awl)
// console.log("not in GEPT:", notInGEPT)
// console.log("in GEPT:", inGEPT)
    </script>

  </body>
</html>